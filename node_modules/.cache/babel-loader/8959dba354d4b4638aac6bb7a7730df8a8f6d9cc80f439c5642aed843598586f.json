{"ast":null,"code":"import { useCallback, useEffect } from 'react';\nimport * as domEvents from '../constants/domEvents';\nimport debugLog from '../libs/log';\nimport { closeApp, isTVBrowser, reload } from '../libs/utils';\nimport { useProcStat } from '../hooks/useData';\nconst useVisibleChangeHandler = () => useCallback(() => {\n  const {\n    hidden\n  } = document;\n  debugLog('VISIBILITY_CHANGE', {\n    hidden\n  });\n}, []);\nconst useLocaleChangeHandler = () => useCallback(() => {\n  debugLog('LOCALE_CHANGE', {});\n  reload();\n}, []);\nconst useHighContrastChangeHandler = setSkinVariants => useCallback(() => {\n  debugLog('HIGH_CONTRAST_CHANGE', {});\n  setSkinVariants({\n    highContrast: window.webOSSystem.highContrast === 'on'\n  });\n}, [setSkinVariants]);\nexport const useBackHandler = () => useCallback(() => {\n  debugLog('BACK[I]', {});\n}, []);\nexport const useCloseHandler = () => useCallback(() => {\n  debugLog('CLOSE_X[I]', {});\n  closeApp();\n}, []);\n\n// Add all document events here\nexport const useDocumentEvent = setSkinVariants => {\n  const handleVisibilitychange = useVisibleChangeHandler();\n  const handleHighContrastChange = useHighContrastChangeHandler(setSkinVariants);\n  const handleLocaleChange = useLocaleChangeHandler();\n  useEffect(() => {\n    const events = {\n      [domEvents.VISIBILITY_CHANGE]: handleVisibilitychange,\n      [domEvents.WEBOS_HIHG_CONTRAST_CHANGE]: handleHighContrastChange,\n      [domEvents.WEBOS_LOCALE_CHANGE]: handleLocaleChange\n    };\n    if (isTVBrowser()) {\n      for (const event in events) {\n        document.addEventListener(event, events[event]);\n      }\n    }\n    return () => {\n      if (isTVBrowser()) {\n        for (const event in events) {\n          document.removeEventListener(event, events[event]);\n        }\n      }\n    };\n  }, [handleVisibilitychange, handleHighContrastChange, handleLocaleChange]);\n};\n\n// Add functions to subscribe luna APIs for general usage here\nexport const useSubscriptions = () => {\n  useProcStat();\n};","map":{"version":3,"names":["useCallback","useEffect","domEvents","debugLog","closeApp","isTVBrowser","reload","useProcStat","useVisibleChangeHandler","hidden","document","useLocaleChangeHandler","useHighContrastChangeHandler","setSkinVariants","highContrast","window","webOSSystem","useBackHandler","useCloseHandler","useDocumentEvent","handleVisibilitychange","handleHighContrastChange","handleLocaleChange","events","VISIBILITY_CHANGE","WEBOS_HIHG_CONTRAST_CHANGE","WEBOS_LOCALE_CHANGE","event","addEventListener","removeEventListener","useSubscriptions"],"sources":["/Users/gitchan/Projects/gitchan-yonsei/2024-enact-template/src/App/AppState.js"],"sourcesContent":["import {useCallback, useEffect} from 'react';\nimport * as domEvents from '../constants/domEvents';\nimport debugLog from '../libs/log';\nimport {closeApp, isTVBrowser, reload} from '../libs/utils';\nimport { useProcStat } from '../hooks/useData';\n\nconst useVisibleChangeHandler = () =>\n\tuseCallback(() => {\n\t\tconst {hidden} = document;\n\t\tdebugLog('VISIBILITY_CHANGE', {hidden});\n\t}, []);\n\nconst useLocaleChangeHandler = () =>\n\tuseCallback(() => {\n\t\tdebugLog('LOCALE_CHANGE', {});\n\t\treload();\n\t}, []);\n\nconst useHighContrastChangeHandler = setSkinVariants =>\n\tuseCallback(() => {\n\t\tdebugLog('HIGH_CONTRAST_CHANGE', {});\n\t\tsetSkinVariants({\n\t\t\thighContrast: window.webOSSystem.highContrast === 'on'\n\t\t});\n\t}, [setSkinVariants]);\n\nexport const useBackHandler = () =>\n\tuseCallback(() => {\n\t\tdebugLog('BACK[I]', {});\n\t}, []);\n\nexport const useCloseHandler = () =>\n\tuseCallback(() => {\n\t\tdebugLog('CLOSE_X[I]', {});\n\t\tcloseApp();\n\t}, []);\n\n// Add all document events here\nexport const useDocumentEvent = setSkinVariants => {\n\tconst handleVisibilitychange = useVisibleChangeHandler();\n\tconst handleHighContrastChange =\n\t\tuseHighContrastChangeHandler(setSkinVariants);\n\tconst handleLocaleChange = useLocaleChangeHandler();\n\n\tuseEffect(() => {\n\t\tconst events = {\n\t\t\t[domEvents.VISIBILITY_CHANGE]: handleVisibilitychange,\n\t\t\t[domEvents.WEBOS_HIHG_CONTRAST_CHANGE]: handleHighContrastChange,\n\t\t\t[domEvents.WEBOS_LOCALE_CHANGE]: handleLocaleChange\n\t\t};\n\n\t\tif (isTVBrowser()) {\n\t\t\tfor (const event in events) {\n\t\t\t\tdocument.addEventListener(event, events[event]);\n\t\t\t}\n\t\t}\n\n\t\treturn () => {\n\t\t\tif (isTVBrowser()) {\n\t\t\t\tfor (const event in events) {\n\t\t\t\t\tdocument.removeEventListener(event, events[event]);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}, [handleVisibilitychange, handleHighContrastChange, handleLocaleChange]);\n};\n\n// Add functions to subscribe luna APIs for general usage here\nexport const useSubscriptions = () => {\n\tuseProcStat();\n};\n"],"mappings":"AAAA,SAAQA,WAAW,EAAEC,SAAS,QAAO,OAAO;AAC5C,OAAO,KAAKC,SAAS,MAAM,wBAAwB;AACnD,OAAOC,QAAQ,MAAM,aAAa;AAClC,SAAQC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,QAAO,eAAe;AAC3D,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,uBAAuB,GAAGA,CAAA,KAC/BR,WAAW,CAAC,MAAM;EACjB,MAAM;IAACS;EAAM,CAAC,GAAGC,QAAQ;EACzBP,QAAQ,CAAC,mBAAmB,EAAE;IAACM;EAAM,CAAC,CAAC;AACxC,CAAC,EAAE,EAAE,CAAC;AAEP,MAAME,sBAAsB,GAAGA,CAAA,KAC9BX,WAAW,CAAC,MAAM;EACjBG,QAAQ,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;EAC7BG,MAAM,CAAC,CAAC;AACT,CAAC,EAAE,EAAE,CAAC;AAEP,MAAMM,4BAA4B,GAAGC,eAAe,IACnDb,WAAW,CAAC,MAAM;EACjBG,QAAQ,CAAC,sBAAsB,EAAE,CAAC,CAAC,CAAC;EACpCU,eAAe,CAAC;IACfC,YAAY,EAAEC,MAAM,CAACC,WAAW,CAACF,YAAY,KAAK;EACnD,CAAC,CAAC;AACH,CAAC,EAAE,CAACD,eAAe,CAAC,CAAC;AAEtB,OAAO,MAAMI,cAAc,GAAGA,CAAA,KAC7BjB,WAAW,CAAC,MAAM;EACjBG,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AACxB,CAAC,EAAE,EAAE,CAAC;AAEP,OAAO,MAAMe,eAAe,GAAGA,CAAA,KAC9BlB,WAAW,CAAC,MAAM;EACjBG,QAAQ,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;EAC1BC,QAAQ,CAAC,CAAC;AACX,CAAC,EAAE,EAAE,CAAC;;AAEP;AACA,OAAO,MAAMe,gBAAgB,GAAGN,eAAe,IAAI;EAClD,MAAMO,sBAAsB,GAAGZ,uBAAuB,CAAC,CAAC;EACxD,MAAMa,wBAAwB,GAC7BT,4BAA4B,CAACC,eAAe,CAAC;EAC9C,MAAMS,kBAAkB,GAAGX,sBAAsB,CAAC,CAAC;EAEnDV,SAAS,CAAC,MAAM;IACf,MAAMsB,MAAM,GAAG;MACd,CAACrB,SAAS,CAACsB,iBAAiB,GAAGJ,sBAAsB;MACrD,CAAClB,SAAS,CAACuB,0BAA0B,GAAGJ,wBAAwB;MAChE,CAACnB,SAAS,CAACwB,mBAAmB,GAAGJ;IAClC,CAAC;IAED,IAAIjB,WAAW,CAAC,CAAC,EAAE;MAClB,KAAK,MAAMsB,KAAK,IAAIJ,MAAM,EAAE;QAC3Bb,QAAQ,CAACkB,gBAAgB,CAACD,KAAK,EAAEJ,MAAM,CAACI,KAAK,CAAC,CAAC;MAChD;IACD;IAEA,OAAO,MAAM;MACZ,IAAItB,WAAW,CAAC,CAAC,EAAE;QAClB,KAAK,MAAMsB,KAAK,IAAIJ,MAAM,EAAE;UAC3Bb,QAAQ,CAACmB,mBAAmB,CAACF,KAAK,EAAEJ,MAAM,CAACI,KAAK,CAAC,CAAC;QACnD;MACD;IACD,CAAC;EACF,CAAC,EAAE,CAACP,sBAAsB,EAAEC,wBAAwB,EAAEC,kBAAkB,CAAC,CAAC;AAC3E,CAAC;;AAED;AACA,OAAO,MAAMQ,gBAAgB,GAAGA,CAAA,KAAM;EACrCvB,WAAW,CAAC,CAAC;AACd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}